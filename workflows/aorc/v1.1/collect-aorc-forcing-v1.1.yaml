metadata:
  name: collect-aorc-forcing-v1.1
  namespace: workflows
  uid: 7a3c73aa-b714-4a50-b42c-952be475f0d2
  resourceVersion: '502634386'
  generation: 12
  creationTimestamp: '2023-11-30T16:46:48Z'
  labels:
    workflows.argoproj.io/creator: '116317613255759624565'
  managedFields:
    - manager: argo
      operation: Update
      apiVersion: argoproj.io/v1alpha1
      time: '2024-05-16T00:55:04Z'
      fieldsType: FieldsV1
      fieldsV1:
        f:metadata:
          f:labels:
            .: {}
            f:workflows.argoproj.io/creator: {}
        f:spec: {}
spec:
  templates:
    - name: collect-aorc
      inputs:
        parameters:
          - name: shape-file-path
            value: '{{workflow.parameters.shape-file-path}}'
          - name: output-bucket
            value: '{{workflow.parameters.output_bucket}}'
          - name: input-bucket
            value: '{{workflow.parameters.input_bucket}}'
          - name: output-path
            value: '{{workflow.parameters.output_path}}'
          - name: start-date
            value: '{{workflow.parameters.start-date}}'
          - name: end-date
            value: '{{workflow.parameters.end-date}}'
        artifacts:
          - name: shapefile-input
            path: /input
            s3:
              endpoint: api.minio.cuahsi.io
              bucket: '{{inputs.parameters.input-bucket}}'
              accessKeySecret:
                name: minio-credentials
                key: accessKey
              secretKeySecret:
                name: minio-credentials
                key: secretKey
              key: '{{inputs.parameters.shape-file-path}}'
      outputs:
        artifacts:
          - name: aorc-output-artifact
            path: /output
            s3:
              endpoint: api.minio.cuahsi.io
              bucket: '{{inputs.parameters.output-bucket}}'
              accessKeySecret:
                name: minio-credentials
                key: accessKey
              secretKeySecret:
                name: minio-credentials
                key: secretKey
              key: '{{inputs.parameters.output-path}}'
            archive:
              none: {}
      metadata: {}
      container:
        name: ''
        image: cuahsi/aorc-v1.1:20240515_2
        command:
          - python
          - '-u'
          - entry.py
        args:
          - '{{inputs.parameters.start-date}}'
          - '{{inputs.parameters.end-date}}'
          - /input/watershed.shp
          - s3://noaa-nwm-retrospective-3-0-pds
          - /output/forcing.nc
        ports:
          - containerPort: 8787
        resources:
          requests:
            cpu: '2'
            ephemeral-storage: 10Gi
            memory: 16Gi
  entrypoint: collect-aorc
  arguments:
    parameters:
      - name: start-date
        value: '2020-01-01'
      - name: end-date
        value: '2020-01-10'
      - name: output_bucket
        value: acastronova
      - name: input_bucket
        value: acastronova
      - name: output_path
        value: wb-2853612/forcing
      - name: shape-file-path
        value: wb-2853612/domain/watershed.gz
  templateDefaults:
    inputs: {}
    outputs: {}
    metadata: {}
    retryStrategy:
      limit: '0'
    timeout: 600s

